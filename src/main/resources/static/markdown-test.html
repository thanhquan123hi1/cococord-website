<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Markdown Rendering - CocoCord</title>
    
    <!-- Highlight.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css" integrity="sha512-IHD9jLLUjCx53TLIPc/t0vCJJH/FH8SFzUxjUJv/+R+qEd8WTF/OXI0yfnkQa0OgFQY9bJQIYqHuN0o9W1/5Ng==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/markdown.css">
    
    <style>
        body {
            background: #36393f;
            color: #dcddde;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .panel {
            background: #2f3136;
            padding: 20px;
            border-radius: 8px;
        }
        
        h1 {
            color: #ffffff;
            border-bottom: 2px solid #5865f2;
            padding-bottom: 10px;
        }
        
        h2 {
            color: #ffffff;
            margin-top: 0;
        }
        
        textarea {
            width: 100%;
            min-height: 400px;
            background: #40444b;
            color: #dcddde;
            border: 1px solid #202225;
            border-radius: 4px;
            padding: 12px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            resize: vertical;
        }
        
        button {
            background: #5865f2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
        }
        
        button:hover {
            background: #4752c4;
        }
        
        .output {
            background: #40444b;
            padding: 15px;
            border-radius: 4px;
            min-height: 400px;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .sample-messages {
            margin-top: 20px;
        }
        
        .sample-btn {
            background: #3ba55d;
            margin-right: 8px;
            margin-bottom: 8px;
            display: inline-block;
        }
        
        .sample-btn:hover {
            background: #2d7d46;
        }
    </style>
</head>
<body>
    <h1>üöÄ CocoCord Markdown Renderer - Test Tool</h1>
    <p>Test t√≠nh nƒÉng Markdown + Syntax Highlighting cho tin nh·∫Øn</p>
    
    <div class="container">
        <!-- Input Panel -->
        <div class="panel">
            <h2>üìù Nh·∫≠p Markdown</h2>
            <textarea id="markdownInput" placeholder="Nh·∫≠p n·ªôi dung markdown ·ªü ƒë√¢y...">Xin ch√†o! ƒê√¢y l√† **tin nh·∫Øn demo** v·ªõi Markdown support! üéâ

## C√°c t√≠nh nƒÉng:

1. **Bold text** v√† *italic text*
2. `Inline code` nh∆∞ \`System.out.println()\`
3. Code blocks v·ªõi syntax highlighting

### Code Java:
\`\`\`java
public class HelloCocoCord {
    public static void main(String[] args) {
        System.out.println("Hello World!");
        int number = 42;
        String message = "CocoCord";
    }
}
\`\`\`

### Code JavaScript:
\`\`\`javascript
function sendMessage(content) {
    fetch('/api/messages', {
        method: 'POST',
        body: JSON.stringify({ content })
    }).then(res => res.json());
}
\`\`\`

### Blockquote:
> ƒê√¢y l√† blockquote
> Multi-line support
> R·∫•t ƒë∆°n gi·∫£n!

### Links:
Gh√© thƒÉm [CocoCord](https://cococord.vn) c·ªßa ch√∫ng t√¥i!

### Mentions:
Hey @nguyenvana, @tranvanb check this out!

---

**L∆∞u √Ω**: T·∫•t c·∫£ HTML tags nguy hi·ªÉm ƒë√£ ƒë∆∞·ª£c sanitized ƒë·ªÉ tr√°nh XSS! üîí</textarea>
            
            <button onclick="renderMarkdown()">üîÑ Render Markdown</button>
            
            <div class="sample-messages">
                <h3>üìã M·∫´u tin nh·∫Øn:</h3>
                <button class="sample-btn" onclick="loadSample('simple')">Simple</button>
                <button class="sample-btn" onclick="loadSample('code')">Code Heavy</button>
                <button class="sample-btn" onclick="loadSample('formatting')">Formatting</button>
                <button class="sample-btn" onclick="loadSample('xss')">XSS Test</button>
            </div>
        </div>
        
        <!-- Output Panel -->
        <div class="panel">
            <h2>‚ú® K·∫øt qu·∫£</h2>
            <div id="output" class="output markdown-content">
                <p style="color: #72767d; text-align: center; padding: 50px 0;">
                    K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y...
                </p>
            </div>
        </div>
    </div>
    
    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/11.2.0/marked.min.js" integrity="sha512-eUxlZzJK5H7MjNWdmLRZR2YqzEoJPjNnYfSCW+r7L7R2FYvZ0nZjGDr0JdGX2+BxQZ6k7xzJxT4ZBaHnmNIQzg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-H8S3B7t4vTnfg1IXSvWXGMxvYlSLXr7IzaSwG3Prd/aCQjqnPxCYXWP5KgRpMW/JFY48Gn3S1X1vR2UkuB+kJQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="/js/markdown-renderer.js"></script>
    
    <script>
        // Sample messages
        const samples = {
            simple: `Hello **world**! This is *italic* and \`inline code\`.`,
            
            code: `Check out this code:

\`\`\`java
@RestController
@RequestMapping("/api/messages")
public class MessageController {
    @PostMapping
    public ResponseEntity<Message> sendMessage(@RequestBody MessageDto dto) {
        Message msg = messageService.save(dto);
        return ResponseEntity.ok(msg);
    }
}
\`\`\`

\`\`\`sql
SELECT * FROM messages 
WHERE channel_id = 123 
ORDER BY created_at DESC 
LIMIT 50;
\`\`\``,
            
            formatting: `# Header 1
## Header 2
### Header 3

**Bold** and *italic* and ~~strikethrough~~

> This is a quote
> Multiple lines

- List item 1
- List item 2
  - Nested item

1. Ordered item
2. Another item

[Link to Google](https://google.com)

---

Horizontal rule above`,
            
            xss: `# XSS Security Test

Trying to inject script:
<script>alert('XSS')</script>

Trying onclick:
<img src="x" onerror="alert('XSS')">

Trying iframe:
<iframe src="javascript:alert('XSS')"></iframe>

**N·∫øu kh√¥ng c√≥ alert popup = Security OK! ‚úÖ**`
        };
        
        function renderMarkdown() {
            const input = document.getElementById('markdownInput').value;
            const output = document.getElementById('output');
            
            try {
                const html = window.CocoCordMarkdown.render(input);
                output.innerHTML = html;
            } catch (error) {
                output.innerHTML = `<p style="color: #f04747;">Error: ${error.message}</p>`;
            }
        }
        
        function loadSample(type) {
            document.getElementById('markdownInput').value = samples[type];
            renderMarkdown();
        }
        
        // Auto-render on load
        window.addEventListener('DOMContentLoaded', () => {
            renderMarkdown();
        });
        
        // Auto-render on input (debounced)
        let timeout;
        document.getElementById('markdownInput').addEventListener('input', () => {
            clearTimeout(timeout);
            timeout = setTimeout(renderMarkdown, 500);
        });
    </script>
</body>
</html>
